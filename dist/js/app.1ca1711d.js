(function(){"use strict";var e={3067:function(e,t,o){var a=o(9242),l=o(3396);function n(e,t,o,a,n,r){const i=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(i)}var r={name:"App"},i=o(89);const s=(0,i.Z)(r,[["render",n]]);var c=s,d=o(5017),u=(o(4415),o(678)),p=o(7139);const h={class:"literatureTable-div"},m={class:"category-div"},f=["onClick"],g=(0,l.Uk)(" 添加类别 "),v={class:"right-div"},y=(0,l.Uk)(" 上传 "),b=(0,l.Uk)(" 下载 "),w=(0,l.Uk)(" 删除 "),C={class:"category-table-div"};function k(e,t,o,a,n,r){const i=(0,l.up)("IndexView"),s=(0,l.up)("el-tag"),c=(0,l.up)("CirclePlus"),d=(0,l.up)("el-icon"),u=(0,l.up)("el-button"),k=(0,l.up)("el-autocomplete"),_=(0,l.up)("Upload"),U=(0,l.up)("Download"),L=(0,l.up)("Delete"),j=(0,l.up)("el-table-column"),I=(0,l.up)("el-table"),S=(0,l.up)("el-pagination"),x=(0,l.up)("upload-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(i,{title_:"文献查询"}),(0,l._)("div",h,[(0,l._)("div",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.categoryList,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,onClick:t=>r.categoryClick(e.id),class:(0,p.C_)({active:n.activeID===e.id})},[(0,l.Uk)((0,p.zw)(e.name)+" ",1),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,p.zw)(e.count),1)])),_:2},1024)],10,f)))),128)),(0,l.Wm)(u,{type:"primary",onClick:r.addCategory},{default:(0,l.w5)((()=>[g,(0,l.Wm)(d,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1})])),_:1},8,["onClick"])]),(0,l._)("div",v,[(0,l.Wm)(k,{modelValue:e.state,"onUpdate:modelValue":t[0]||(t[0]=t=>e.state=t),"fetch-suggestions":e.querySearchAsync,placeholder:"Please input",onSelect:e.handleSelect},null,8,["modelValue","fetch-suggestions","onSelect"]),(0,l.Wm)(u,{type:"primary",onClick:r.uploadFile},{default:(0,l.w5)((()=>[y,(0,l.Wm)(d,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(_)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(u,{type:"primary",onClick:r.downloadFile},{default:(0,l.w5)((()=>[b,(0,l.Wm)(d,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(U)])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(u,{type:"primary",onClick:r.deleteFile},{default:(0,l.w5)((()=>[w,(0,l.Wm)(d,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(L)])),_:1})])),_:1},8,["onClick"]),(0,l._)("div",C,[(0,l.Wm)(I,{class:"category-table","header-cell-class-name":"category-table-header",data:n.tableList,border:"",stripe:"","row-key":r.getRowKey,onCellClick:r.tableCellClick,onSelect:r.tableRowClick,onSelectAll:r.tableAllSelect},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{type:"selection",label:"No.",width:70}),(0,l.Wm)(j,{sortable:"",prop:"name",label:"名称",width:""}),(0,l.Wm)(j,{sortable:"",prop:"influence_factory",label:"影响因子",width:"120"}),(0,l.Wm)(j,{sortable:"",prop:"flag",label:"是否已读",width:"120"}),(0,l.Wm)(j,{prop:"remarks",label:"备注",width:""})])),_:1},8,["data","row-key","onCellClick","onSelect","onSelectAll"]),(0,l.Wm)(S,{background:"","hide-on-single-page":!0,layout:"prev, pager, next",pageSize:n.pageSize,"current-page":n.page,total:n.literatureList.length,onCurrentChange:r.currentChange},null,8,["pageSize","current-page","total","onCurrentChange"])])]),n.uploadVis?((0,l.wg)(),(0,l.j4)(x,{key:0,class:"upload-div",categoryId:n.activeID},null,8,["categoryId"])):(0,l.kq)("",!0)])],64)}var _=o(6265),U=o.n(_);o(1703);const L=U().create({baseURL:"/",timeout:1e4,headers:{"Cache-Control":"no-cache"}});L.interceptors.request.use((e=>{if("get"===e.method&&e.params){let a=e.url+"?";for(const l of Object.keys(e.params)){const n=e.params[l];var t=encodeURIComponent(l)+"=";if(null!==n&&"undefined"!==typeof n)if("object"===typeof n)for(const e of Object.keys(n)){let t=l+"["+e+"]";var o=encodeURIComponent(t)+"=";a+=o+encodeURIComponent(n[e])+"&"}else a+=t+encodeURIComponent(n)+"&"}a=a.slice(0,-1),e.params={},e.url=a}return e}),(e=>{Promise.reject(e)})),L.interceptors.response.use((e=>{"401"==e.data.code&&localStorage.removeItem("token");const t=e.data;return t.code,t}),(e=>Promise.reject(e)));const j=U().create({baseURL:"/",headers:{"Content-Type":"multipart/form-data","Cache-Control":"no-cache"}});j.interceptors.request.use((e=>e),(e=>{Promise.reject(e)})),j.interceptors.response.use((e=>{const t=e.data;return t&&"1"!==t.a&&t.a?Promise.reject(new Error(t.msg||"Error")):t}),(e=>Promise.reject(e)));const I=U().create({baseURL:"/",timeout:2e6,headers:{"Cache-Control":"no-cache","Content-Type":"application/json;"},responseType:"blob"});I.interceptors.request.use((e=>{const t=!1===(e.headers||{}).isToken;if(localStorage.getItem("token")&&!t&&(e.headers["token"]=localStorage.getItem("token")),"get"===e.method&&e.params){let t=e.url+"?";for(const l of Object.keys(e.params)){const n=e.params[l];var o=encodeURIComponent(l)+"=";if(null!==n&&"undefined"!==typeof n)if("object"===typeof n)for(const e of Object.keys(n)){let o=l+"["+e+"]";var a=encodeURIComponent(o)+"=";t+=a+encodeURIComponent(n[e])+"&"}else t+=o+encodeURIComponent(n)+"&"}t=t.slice(0,-1),e.params={},e.url=t}return e}),(e=>{Promise.reject(e)})),I.interceptors.response.use((e=>{console.log(e);var t=e.headers["content-disposition"],o=t.indexOf("="),a=t.substring(o+2,t.length-1);const l=new Blob([e.data]),n=document.createElement("a");n.download=a,n.style.display="none",n.href=URL.createObjectURL(l),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}),(e=>Promise.reject(e)));const S=U().create({baseURL:"/",timeout:2e6,headers:{"Cache-Control":"no-cache","Content-Type":"application/json; charset=utf-8"},responseType:"blob"});function x(){var e=new Date,t=e.getMonth()+1,o=e.getDate(),a=e.getHours(),l=e.getMinutes(),n=e.getSeconds();t>=1&&t<=9&&(t="0"+t),o>=0&&o<=9&&(o="0"+o),a>=0&&a<=9&&(a="0"+a),l>=0&&l<=9&&(l="0"+l),n>=0&&n<=9&&(n="0"+n);var r=e.getFullYear()+""+t+o+a+l+n;return r}S.interceptors.request.use((e=>{const t=!1===(e.headers||{}).isToken;if(localStorage.getItem("token")&&!t&&(e.headers["token"]=localStorage.getItem("token")),"get"===e.method&&e.params){let t=e.url+"?";for(const l of Object.keys(e.params)){const n=e.params[l];var o=encodeURIComponent(l)+"=";if(null!==n&&"undefined"!==typeof n)if("object"===typeof n)for(const e of Object.keys(n)){let o=l+"["+e+"]";var a=encodeURIComponent(o)+"=";t+=a+encodeURIComponent(n[e])+"&"}else t+=o+encodeURIComponent(n)+"&"}t=t.slice(0,-1),e.params={},e.url=t}return e}),(e=>{Promise.reject(e)})),S.interceptors.response.use((e=>{const t=new Blob([e.data]);var o=x();const a="保险单"+o+".xlsx",l=document.createElement("a");l.download=a,l.style.display="none",l.href=URL.createObjectURL(t),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}),(e=>Promise.reject(e)));var R=o.p+"img/icon.0f6ee684.jpg";const W=(0,l._)("img",{src:R,class:"logo",alt:""},null,-1),D=(0,l._)("div",{class:"flex-grow"},null,-1),O=(0,l.Uk)("首页"),T=(0,l.Uk)("文献"),F=(0,l.Uk)("关于");function P(e,t,o,a,n,r){const i=(0,l.up)("el-menu-item"),s=(0,l.up)("el-menu");return(0,l.wg)(),(0,l.j4)(s,{"default-active":n.activeIndex,class:"menu",mode:"horizontal",router:!0,ellipsis:!1,"active-text-color":"#2293f6",onSelect:r.handleSelect},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{index:""},{default:(0,l.w5)((()=>[W,(0,l._)("a",null,(0,p.zw)(o.title_),1)])),_:1}),D,(0,l.Wm)(i,{index:""},{default:(0,l.w5)((()=>[O])),_:1}),(0,l.Wm)(i,{index:"/"},{default:(0,l.w5)((()=>[T])),_:1}),(0,l.Wm)(i,{index:""},{default:(0,l.w5)((()=>[F])),_:1})])),_:1},8,["default-active","onSelect"])}var q={name:"IndexView",props:{title_:{type:String,default:"lalala"}},data(){return{activeIndex:"/"}},methods:{handleSelect(e){this.activeIndex=e}}};const V=(0,i.Z)(q,[["render",P]]);var $=V;const z=e=>((0,l.dD)("data-v-8d6bff02"),e=e(),(0,l.Cn)(),e),E={class:"header-div"},A=(0,l.Uk)("上传文件 "),M={class:"content-div"},Z=z((()=>(0,l._)("div",{class:"el-upload__text"},[(0,l.Uk)(" Drop file here or "),(0,l._)("em",null,"click to upload")],-1))),Y=(0,l.Uk)("上传"),H=(0,l.Uk)("清除");function B(e,t,o,a,n,r){const i=(0,l.up)("upload-filled"),s=(0,l.up)("el-icon"),c=(0,l.up)("el-upload"),d=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",E,[A,(0,l._)("span",{class:"close-span",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))},"×")]),(0,l._)("div",M,[(0,l.Wm)(c,{class:"uploadFile",name:"file",ref:"uploadFile",drag:!0,action:n.actionUrl,multiple:!0,"on-success":r.judgeRes,data:{id:o.categoryId},"auto-upload":!1,"show-file-list":!0},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{class:"el-icon--upload"},{default:(0,l.w5)((()=>[(0,l.Wm)(i)])),_:1}),Z])),_:1},8,["action","on-success","data"]),(0,l.Wm)(d,{type:"primary",onClick:r.uploadFile},{default:(0,l.w5)((()=>[Y])),_:1},8,["onClick"]),(0,l.Wm)(d,{type:"primary",onClick:r.clearFile},{default:(0,l.w5)((()=>[H])),_:1},8,["onClick"])])])}var K={name:"uploadView",props:{categoryId:{type:String,default:"84422d4e219a44908b51fdf57f1ca8dc"}},data(){return{actionUrl:""}},methods:{getActionUrl(){let e=this.$store.state;this.actionUrl=e.url+e.api.uploadLiterature.addr},uploadFile(){this.$refs.uploadFile.submit()},clearFile(){this.$refs.uploadFile.clearFiles()},judgeRes(e,t,o){console.log(e,t,o),e.success||alert(e.msg)},close(){this.$parent.uploadVis=!1}},mounted(){this.getActionUrl()}};const N=(0,i.Z)(K,[["render",B],["__scopeId","data-v-8d6bff02"]]);var G=N,J=o(2748),X={name:"LiteratureTable",components:{IndexView:$,Upload:J.gqx,Delete:J.HG3,Download:J.UWx,CirclePlus:J.Gq5,"upload-view":G},data(){return{activeID:"",pageSize:10,page:1,categoryList:[],literatureList:[],tableList:[],selectList:[],uploadVis:!1}},methods:{addCategory(){},deleteFile(){let e=this.$store.state,t=e.api.deleteLiterature.addr,o=this.selectList.join(",");console.log(JSON.stringify({id:o}));var a=JSON.stringify({id:o});0!=this.selectList.length&&U().post(t,a).then((e=>{console.log(e),e.data.success?(alert("删除成功"),location.reload()):alert(e.data.msg)}))},downloadFile(){let e=this.$store.state,t=e.api.downloadLiterature.addr,o=this.selectList.join(",");U().get(t+"?id="+o,{responseType:"blob",headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((e=>{var t=e.headers["content-disposition"],o=t.indexOf("="),a=t.substring(o+2,t.length-1);a=decodeURI(a);let l=new Blob([e.data]),n=document.createElement("a");n.download=a,n.href=URL.createObjectURL(l),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}))},getRowKey(e){return e.id},tableAllSelect(e){e.map((e=>{this.selectList.push(e.id)}))},tableRowClick(e,t){0!==e.length?this.selectList.push(t.id):this.selectList=this.selectList.filter((e=>e!==t.id))},uploadFile(){this.uploadVis=!0},categoryClick(e){this.activeID=e,this.getList()},tableCellClick(e,t,o,a){if(console.log(e,t,o,a),"name"===t.property){const{href:t}=this.$router.resolve({name:"pdf",query:{url:e.filepath}});window.open(t,"_blank")}},currentChange(e){this.page=e;let t=(e-1)*this.pageSize,o=e*this.pageSize;this.tableList=this.literatureList.slice(t,o)},getCategoryList(){let e=this.$store.state,t=e.api.queryCategory.addr,o=this;L.get(t).then((e=>{e.success&&(o.categoryList=e.data,o.categoryList.length>0&&(o.activeID=this.categoryList[0].id),o.getList())}))},getList(){let e=this.$store.state,t=e.api.queryList.addr,o=this;L.get(t,{params:{id:this.activeID,page:this.page}}).then((e=>{if(console.log(e),e.success){o.literatureList=e.data,this.page=1;let t=(this.page-1)*this.pageSize,a=this.pageSize;this.tableList=this.literatureList.slice(t,a)}}))}},mounted(){this.getCategoryList()}};const Q=(0,i.Z)(X,[["render",k],["__scopeId","data-v-53da28e2"]]);var ee=Q;const te=e=>((0,l.dD)("data-v-dcb3e1d0"),e=e(),(0,l.Cn)(),e),oe={class:"pdfjs"},ae={class:"pdf-div"},le=["src"],ne={class:"translate-div"},re={style:{margin:"10px"}},ie=te((()=>(0,l._)("h3",null,"【译文】",-1))),se=te((()=>(0,l._)("br",null,null,-1))),ce=te((()=>(0,l._)("br",null,null,-1))),de=te((()=>(0,l._)("h3",null,"【原文】",-1)));function ue(e,t,o,a,n,r){const i=(0,l.up)("el-option"),s=(0,l.up)("el-select");return(0,l.wg)(),(0,l.iD)("div",oe,[(0,l._)("div",ae,[(0,l._)("iframe",{id:"myIframe",width:"100%",frameborder:"0",style:{width:"100%",height:"100%"},src:n.pdfSrc},null,8,le)]),(0,l._)("div",ne,[(0,l._)("div",re,[(0,l.Wm)(s,{modelValue:n.method,"onUpdate:modelValue":t[0]||(t[0]=e=>n.method=e),placeholder:"翻译引擎",onChange:r.changeTranslateMethod},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.translateMethods,(e=>((0,l.wg)(),(0,l.j4)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),ie,(0,l._)("p",null,(0,p.zw)(n.dstText),1),se,ce,de,(0,l._)("p",null,(0,p.zw)(n.srcText),1)])])])}var pe={name:"PdfView",data(){return{viewerUrl:"/static/pdfjs/web/viewer.html",src:"",pdfSrc:"",srcText:"",dstText:"",method:"bd",translateMethods:[{value:"bd",label:"百度翻译"},{value:"yd",label:"有道翻译"}]}},mounted:function(){let e=this.$store.state,t=e.api.readPDF.addr;this.src=t+"?filepath="+this.$route.query.url,this.loadPDF(),this.recognition()},methods:{loadPDF(){this.pdfSrc=`${this.viewerUrl}?file=${encodeURIComponent(this.src)}`},recognition(){let e=this,t=document.getElementById("myIframe"),o="",a="",l="",n="";t.onload=function(){t.contentDocument.addEventListener("mousedown",(function(e){o=e.pageX,a=e.pageY}),!0),t.contentDocument.addEventListener("mouseup",(function(r){if(l=r.pageX,n=r.pageY,o!==l||a!==n){var i=t.contentWindow.getSelection().toString();e.srcText=i,e.selectText=i,e.translate()}}),!0)}},translate(){let e=this.$store.state,t=e.api.translateText.addr,o=this;L.get(t,{params:{txt:this.srcText,method:this.method}}).then((e=>{e.success&&(o.dstText=e.data)}))},changeTranslateMethod(e){this.method=e}}};const he=(0,i.Z)(pe,[["render",ue],["__scopeId","data-v-dcb3e1d0"]]);var me=he;const fe=(0,u.p7)({history:(0,u.r5)(),routes:[{path:"/",name:"LiteratureTable",component:ee},{path:"/pdf",name:"pdf",component:me},{path:"/upload",name:"pduploadf",component:G}]});var ge=fe,ve=o(65);const ye=new ve.ZP.Store({state:{url:"http://110.42.145.66:5000",api:{queryCategory:{addr:"/literature/category",method:"get"},queryList:{addr:"/literature/list",method:"get"},queryDetail:{addr:"/literature/detail",method:"get"},downloadLiterature:{addr:"/literature/download",method:"get"},translateText:{addr:"/literature/translate",method:"get"},readPDF:{addr:"/literature/pdf",method:"get"},addCategory:{addr:"/literature/category",method:"post"},uploadLiterature:{addr:"/literature/upload",method:"post"},deleteLiterature:{addr:"/literature/delete",method:"post"}}}});var be=ye;const we=(0,a.ri)(c);we.config.globalProperties.$store=be,we.use(ge).use(d.Z).use(be).mount("#app")}},t={};function o(a){var l=t[a];if(void 0!==l)return l.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,a,l,n){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],l=e[d][1],n=e[d][2];for(var i=!0,s=0;s<a.length;s++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[s])}))?a.splice(s--,1):(i=!1,n<r&&(r=n));if(i){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,l,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p=""}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,n,r=a[0],i=a[1],s=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(s)var d=s(o)}for(t&&t(a);c<r.length;c++)n=r[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},a=self["webpackChunkpwp_front"]=self["webpackChunkpwp_front"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(3067)}));a=o.O(a)})();
//# sourceMappingURL=app.1ca1711d.js.map